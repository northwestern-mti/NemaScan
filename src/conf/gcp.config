// configuration for google pipeline API debug 
docker {
  enabled = true
}

process {
  executor = 'google-lifesciences'
  container = 'andersenlab/nemascan:v0.3'
  machineType = 'n1-standard-4'
}

google {
  project = 'andersen-lab'
  zone = 'us-central1-a'
  lifeSciences {
    serviceAccountEmail = 'nscalc-201573431837@andersen-lab.iam.gserviceaccount.com'
    debug = true
    preemptible = true
  }
}

executor {
    queueSize = 500
}


// params
params {
  date = new Date().format( 'yyyyMMdd' )
  vcf = "gs://elegansvariation.org/releases/20210121/variation/WI.20210121.hard-filter.isotype.vcf.gz"
  vcf_index = "gs://elegansvariation.org/releases/20210121/variation/WI.20210121.hard-filter.isotype.vcf.gz.tbi"
  impute_vcf = "gs://elegansvariation.org/releases/20210121/variation/WI.20210121.impute.isotype.vcf.gz"
  impute_vcf_index = "gs://elegansvariation.org/releases/20210121/variation/WI.20210121.impute.isotype.vcf.gz.tbi"
  ann_file = "gs://elegansvariation.org/releases/20210121/variation/WI.20210121.strain-annotation.bcsq.tsv"

  isotype_file = "gs://nf-pipelines/NemaScan/input_data/elegans/isotypes/strain_isotype_lookup.tsv"
  out = "gs://nf-pipelines/output/NemaScan-${date}" // where does output go? (nf-pipeline for caendr, pipelines for andersen-lab)

  // thresholds 
  cores = 4

  // mappings
  maps       = "RUN"
  simulate   = null
  lmm_exact  = "RUN"
  lmm        = "RUN"
  sparse_cut = 0.05
  maf        = 0.05
  R_libpath   = ""
} 

workDir = 'gs://nf-pipelines/workdir/'
